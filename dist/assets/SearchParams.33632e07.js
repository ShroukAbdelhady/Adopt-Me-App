import{j as n,l as N,a as t,r as b,A as P,L as x}from"./index.b92cd693.js";import{u as g}from"./useQuery.esm.516ae6eb.js";const $=async({queryKey:a})=>{const[,e]=a;return e?(await fetch(`http://pets-v2.dev-apis.com/breeds?animal=${e}`)).json():[]},j=a=>g(["breeds",a],$),S=async({queryKey:a})=>{const[,{animal:e,location:i,breed:s}]=a;return(await fetch(`http://pets-v2.dev-apis.com/pets?animal=${e}&city=${i}&breed=${s}`)).json()},A=a=>g(["search-pets",a],S),F=a=>{const{animal:e,name:i,images:s,breed:l,location:o,id:d}=a;let c="http://pets-images.dev-apis.com/pets/none.jpg";return s.length&&(c=s[0]),n(N,{to:`/details/${d}`,className:"pet",children:[t("div",{className:"image-container",children:t("img",{src:c,alt:i})}),n("div",{className:"info",children:[n("h1",{children:["name : ",i]}),n("h2",{children:["animal :",e," "]}),n("h2",{children:[" breed :",l," "]}),n("h2",{children:["location : ",o]})]})]})},w=({pets:a})=>n("div",{className:"search",children:[!a.length&&t("h1",{children:"No pets found "}),a&&a.map(e=>t(F,{name:e.name,animal:e.animal,breed:e.breed,images:e.images,location:`${e.city},${e.state}`,id:e.id},e.id))]}),y=["bird","cat","dog","reptile","rabbit"],D=()=>{var c,h,p,u;const[a,e]=b.exports.useState({location:"",animal:"",breed:""}),[i]=b.exports.useContext(P),s=A(a),l=(h=(c=s==null?void 0:s.data)==null?void 0:c.pets)!=null?h:[],o=j(a.animal),d=(u=(p=o==null?void 0:o.data)==null?void 0:p.breeds)!=null?u:[];return n("div",{className:"search-params",children:[n("form",{onSubmit:r=>{r.preventDefault();const m=new FormData(r.currentTarget),v=m.get("animal"),f=m.get("location"),L=m.get("breed");e({animal:v,location:f,breed:L})},children:[i&&t("div",{className:"pet image-container",children:t("img",{src:i.images[0],alt:i.name})}),n("label",{htmlFor:"location",children:["Location",t("input",{id:"location",placeholder:"Location",name:"location"})]}),n("label",{htmlFor:"animal",children:["animal",n("select",{id:"animal",name:"animal",onChange:r=>{e({...a,animal:r.target.value,breed:""})},children:[t("option",{}),y.map(r=>t("option",{value:r,children:r},r))]})]}),n("label",{htmlFor:"breed",children:["Breed",n("select",{disabled:!d.length,id:"breed",name:"breed",children:[t("option",{}),d.map(r=>t("option",{value:r,children:r},r))]})]}),t("button",{children:"submit"})]}),s.isLoading&&t("div",{className:"search loader-container",children:t(x,{})}),s.isError&&t("span",{children:s.error.message}),s.data&&t(w,{pets:l})]})};export{D as default};
