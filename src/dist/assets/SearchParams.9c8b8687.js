import{j as n,l as N,a as t,r as u,A as P,L as x}from"./index.6d771f0a.js";import{u as g}from"./useQuery.esm.cbf2147a.js";const $=async({queryKey:a})=>{const[,e]=a;return e?(await fetch(`http://pets-v2.dev-apis.com/breeds?animal=${e}`)).json():[]},j=a=>g(["breeds",a],$),S=async({queryKey:a})=>{const[,{animal:e,location:r,breed:s}]=a;return(await fetch(`http://pets-v2.dev-apis.com/pets?animal=${e}&city=${r}&breed=${s}`)).json()},A=a=>g(["search-pets",a],S),F=a=>{const{animal:e,name:r,images:s,breed:l,location:o,id:d}=a;let c="http://pets-images.dev-apis.com/pets/none.jpg";return s.length&&(c=s[0]),n(N,{to:`/details/${d}`,className:"pet",children:[t("div",{className:"image-container",children:t("img",{src:c,alt:r})}),n("div",{className:"info",children:[n("h1",{children:["name : ",r]}),n("h2",{children:["animal : ",e]}),n("h2",{children:["breed :",l]}),n("h2",{children:["location : ",o]})]})]})},w=({pets:a})=>n("div",{className:"search",children:[!a.length&&t("h1",{children:"No pets found "}),a&&a.map(e=>t(F,{name:e.name,animal:e.animal,breed:e.breed,images:e.images,location:`${e.city},${e.state}`,id:e.id},e.id))]}),y=["bird","cat","dog","reptile","rabbit"],D=()=>{var c,h,p,b;const[a,e]=u.exports.useState({location:"",animal:"",breed:""}),[r]=u.exports.useContext(P),s=A(a);let l=(h=(c=s==null?void 0:s.data)==null?void 0:c.pets)!=null?h:[];const o=j(a.animal);let d=(b=(p=o==null?void 0:o.data)==null?void 0:p.breeds)!=null?b:[];return n("div",{className:"search-params",children:[n("form",{onSubmit:i=>{i.preventDefault();const m=new FormData(i.target),v=m.get("animal"),f=m.get("location"),L=m.get("breed");e({animal:v,location:f,breed:L})},children:[r&&t("div",{className:"pet image-container",children:t("img",{src:r.images[0],alt:r.name})}),n("label",{htmlFor:"location",children:["Location",t("input",{id:"location",placeholder:"Location",name:"location"})]}),n("label",{htmlFor:"animal",children:["animal",n("select",{id:"animal",name:"animal",onChange:i=>{e({...a,animal:i.target.value,breed:""})},children:[t("option",{}),y.map(i=>t("option",{value:i,children:i},i))]})]}),n("label",{htmlFor:"breed",children:["Breed",n("select",{disabled:!d.length,id:"breed",name:"breed",children:[t("option",{}),d.map(i=>t("option",{value:i,children:i},i))]})]}),t("button",{children:"submit"})]}),s.isLoading&&t("div",{className:"search loader-container",children:t(x,{})}),s.isError&&t("span",{children:s.error.message}),s.data&&t(w,{pets:l})]})};export{D as default};
